# Claude Code AI 助手 - 可用工具和功能

本文档提供了 Claude Code AI 助手所有可用工具和功能的全面概述。

## 文件和目录操作

### [`Read`](Read)
- **用途**: 读取本地文件系统的文件
- **功能**: 带行号的内容输出，便于参考
- **限制**: 默认读取前2000行，可指定偏移和限制
- **特性**: 支持图像文件可视化显示（PNG、JPG等）
- **注意**: 对于Jupyter笔记本使用 NotebookRead

### [`LS`](LS)
- **用途**: 列出指定路径内的文件和目录
- **参数**: 必须使用绝对路径
- **选项**: 可提供忽略模式的glob数组
- **建议**: 如果知道搜索目录，优先使用 Glob 和 Grep

### [`Glob`](Glob)
- **用途**: 快速文件模式匹配工具
- **支持**: glob模式如 `**/*.js` 或 `src/**/*.ts`
- **排序**: 按修改时间排序返回匹配的文件路径
- **性能**: 适用于任何代码库大小

### [`Grep`](Grep)
- **用途**: 基于 ripgrep 的强大搜索工具
- **语法**: 完整正则表达式支持（ripgrep语法）
- **过滤**: 通过glob或type参数过滤文件
- **输出模式**: 
  - `content`: 显示匹配行
  - `files_with_matches`: 仅显示文件路径（默认）
  - `count`: 显示匹配计数
- **多行匹配**: 使用 `multiline: true` 进行跨行模式匹配

## 代码编辑工具

### [`Write`](Write)
- **用途**: 写入文件到本地文件系统
- **警告**: 会覆盖现有文件
- **要求**: 编辑现有文件前必须先读取
- **原则**: 始终优先编辑现有文件，避免创建新文件

### [`Edit`](Edit)
- **用途**: 在文件中执行精确的字符串替换
- **要求**: 必须先使用 Read 工具读取文件
- **特性**: 
  - 保持精确的缩进（制表符/空格）
  - 支持 `replace_all` 参数替换所有实例
- **注意**: `old_string` 必须在文件中唯一

### [`MultiEdit`](MultiEdit)
- **用途**: 对单个文件进行多次编辑操作
- **优势**: 比多次使用 Edit 更高效
- **执行**: 按顺序应用所有编辑
- **原子性**: 要么全部成功，要么全部失败
- **计划**: 确保早期编辑不影响后续编辑的文本

## Jupyter 笔记本操作

### [`NotebookRead`](NotebookRead)
- **用途**: 读取 Jupyter 笔记本（.ipynb 文件）
- **返回**: 所有单元格及其输出
- **选项**: 可指定特定单元格ID读取
- **路径**: 必须使用绝对路径

### [`NotebookEdit`](NotebookEdit)
- **用途**: 编辑 Jupyter 笔记本中的特定单元格
- **模式**:
  - `replace`: 替换单元格内容（默认）
  - `insert`: 插入新单元格
  - `delete`: 删除单元格
- **索引**: cell_number 从0开始

## 系统和网络操作

### [`Bash`](Bash)
- **用途**: 在持久shell会话中执行bash命令
- **超时**: 默认2分钟，最长10分钟
- **限制**: 输出超过30000字符会被截断
- **重要**: 
  - 避免使用 `find` 和 `grep` 命令
  - 使用绝对路径，避免频繁使用 `cd`
  - 文件路径包含空格时使用双引号
- **Git操作**: 支持创建提交和拉取请求的特殊流程

### [`WebFetch`](WebFetch)
- **用途**: 获取并处理网页内容
- **流程**: 
  1. 获取URL内容
  2. HTML转换为markdown
  3. 使用AI模型处理内容
- **缓存**: 15分钟自清理缓存
- **重定向**: 会通知跨主机重定向

### [`WebSearch`](WebSearch)
- **用途**: 搜索网络获取最新信息
- **限制**: 仅在美国可用
- **过滤**: 支持域名包含/排除
- **时效性**: 提供超出知识截止日期的信息

## 任务管理和协作

### [`Task`](Task)
- **用途**: 启动具有完整工具访问权限的子代理
- **并发**: 支持同时启动多个代理以提高性能
- **状态**: 每次调用都是无状态的
- **使用场景**:
  - 搜索关键词或文件
  - 执行复杂的多步骤搜索
  - 需要多轮搜索和分析时
- **不适用**: 读取特定文件、写代码、运行命令

### [`TodoWrite`](TodoWrite)
- **用途**: 创建和管理结构化任务列表
- **状态**: pending、in_progress、completed
- **规则**: 
  - 同时只能有一个任务为 in_progress
  - 立即更新任务状态
  - 只在完全完成时标记为 completed
- **使用时机**:
  - 复杂多步骤任务（3步以上）
  - 用户提供多个任务
  - 需要跟踪进度时

### [`exit_plan_mode`](exit_plan_mode)
- **用途**: 在计划模式下完成规划后退出
- **条件**: 仅用于需要编写代码的任务规划
- **不适用**: 研究、搜索、理解代码库等任务

## 使用指南

### 工具选择策略

1. **搜索文件**:
   - 已知模式: 使用 `Glob`
   - 搜索内容: 使用 `Grep`
   - 开放式搜索: 使用 `Task`

2. **编辑文件**:
   - 单次编辑: 使用 `Edit`
   - 多次编辑: 使用 `MultiEdit`
   - 新建文件: 使用 `Write`（尽量避免）

3. **执行命令**:
   - 系统命令: 使用 `Bash`
   - 避免交互式命令（-i 标志）

4. **并发操作**:
   - 批量读取文件
   - 同时运行多个 Task
   - 并行执行独立的 Bash 命令

### Git 工作流

**创建提交**:
1. 并行运行: `git status`、`git diff`、`git log`
2. 分析更改并起草提交信息
3. 添加文件并创建提交
4. 提交信息结尾添加 Claude Code 标识

**创建拉取请求**:
1. 检查当前分支状态
2. 必要时创建新分支
3. 推送到远程
4. 使用 `gh pr create` 创建PR

### 最佳实践

1. **性能优化**: 批量调用工具，特别是读取多个可能有用的文件
2. **错误处理**: 遇到错误立即处理，不要继续
3. **路径管理**: 始终使用绝对路径
4. **任务跟踪**: 复杂任务使用 TodoWrite 管理进度
5. **代码风格**: 遵循现有代码库的约定和模式

## 系统信息

- **平台**: Windows (win32)
- **操作系统**: MSYS_NT-10.0-20348 3.4.7-25de8b84.x86_64
- **工作目录**: D:\dev\mathematical-ai-bootstrapping
- **知识截止**: 2025年1月
- **模型**: Claude Opus 4 (claude-opus-4-20250514)

本文档作为理解 Claude Code AI 助手工具集全部功能和正确使用方法的参考。